[
  {
    "name": "search_nodes",
    "description": "STEP 1: Search n8n nodes by keyword to discover available components. Use for finding specific functionality like \"webhook\", \"database\", \"slack\". Follow with get_node_info for details.",
    "inputSchema": {
      "type": "object",
      "properties": {
        "query": {
          "type": "string",
          "description": "Search terms. Use quotes for exact phrase."
        },
        "limit": {
          "type": "number",
          "description": "Max results (default 20)",
          "default": 20
        },
        "mode": {
          "type": "string",
          "enum": [
            "OR",
            "AND",
            "FUZZY"
          ],
          "description": "OR=any word, AND=all words, FUZZY=typo-tolerant",
          "default": "OR"
        }
      },
      "required": [
        "query"
      ]
    }
  },
  {
    "name": "list_nodes",
    "description": "STEP 1 ALT: Browse n8n nodes by category to discover components. Use list_nodes({category:'trigger'}) for triggers, {limit:200} for all nodes. Follow with get_node_info for configuration details.",
    "inputSchema": {
      "type": "object",
      "properties": {
        "package": {
          "type": "string",
          "description": "\"n8n-nodes-base\" (core) or \"@n8n/n8n-nodes-langchain\" (AI)"
        },
        "category": {
          "type": "string",
          "description": "trigger|transform|output|input|AI"
        },
        "developmentStyle": {
          "type": "string",
          "enum": [
            "declarative",
            "programmatic"
          ],
          "description": "Usually \"programmatic\""
        },
        "isAITool": {
          "type": "boolean",
          "description": "Filter AI-capable nodes"
        },
        "limit": {
          "type": "number",
          "description": "Max results (default 50, use 200+ for all)",
          "default": 50
        }
      }
    }
  },
  {
    "name": "get_node_info",
    "description": "STEP 2: Get complete node configuration details. Use after search_nodes/list_nodes to understand parameters, operations, and requirements. Essential before building workflows.",
    "inputSchema": {
      "type": "object",
      "properties": {
        "nodeType": {
          "type": "string",
          "description": "Full type: \"nodes-base.{name}\" or \"nodes-langchain.{name}\". Examples: nodes-base.httpRequest, nodes-base.webhook, nodes-base.slack"
        }
      },
      "required": [
        "nodeType"
      ]
    }
  },
  {
    "name": "validate_workflow",
    "description": "STEP 3: Validate complete workflow before deployment. Checks structure, connections, expressions, and node configurations. ALWAYS use before n8n_create_workflow to prevent errors.",
    "inputSchema": {
      "type": "object",
      "properties": {
        "workflow": {
          "type": "object",
          "description": "The complete workflow JSON to validate. Must include nodes array and connections object."
        },
        "options": {
          "type": "object",
          "properties": {
            "validateNodes": {
              "type": "boolean",
              "description": "Validate individual node configurations. Default true.",
              "default": true
            },
            "validateConnections": {
              "type": "boolean",
              "description": "Validate node connections and flow. Default true.",
              "default": true
            },
            "validateExpressions": {
              "type": "boolean",
              "description": "Validate n8n expressions syntax and references. Default true.",
              "default": true
            },
            "profile": {
              "type": "string",
              "enum": [
                "minimal",
                "runtime",
                "ai-friendly",
                "strict"
              ],
              "description": "Validation profile for node validation. Default \"runtime\".",
              "default": "runtime"
            }
          },
          "description": "Optional validation settings"
        }
      },
      "required": [
        "workflow"
      ],
      "additionalProperties": false
    },
    "outputSchema": {
      "type": "object",
      "properties": {
        "valid": {
          "type": "boolean"
        },
        "summary": {
          "type": "object",
          "properties": {
            "totalNodes": {
              "type": "number"
            },
            "enabledNodes": {
              "type": "number"
            },
            "triggerNodes": {
              "type": "number"
            },
            "validConnections": {
              "type": "number"
            },
            "invalidConnections": {
              "type": "number"
            },
            "expressionsValidated": {
              "type": "number"
            },
            "errorCount": {
              "type": "number"
            },
            "warningCount": {
              "type": "number"
            }
          }
        },
        "errors": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "node": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "details": {
                "type": "string"
              }
            }
          }
        },
        "warnings": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "node": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "details": {
                "type": "string"
              }
            }
          }
        },
        "suggestions": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "valid",
        "summary"
      ]
    }
  },
  {
    "name": "n8n_create_workflow",
    "description": "STEP 4: Create new workflow from validated components. Use validate_workflow first. Requires api_key for user authentication. Workflow created inactive - activate separately in n8n UI.",
    "inputSchema": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Workflow name (required)"
        },
        "nodes": {
          "type": "array",
          "description": "Array of workflow nodes. Each node must have: id, name, type, typeVersion, position, and parameters",
          "items": {
            "type": "object",
            "required": [
              "id",
              "name",
              "type",
              "typeVersion",
              "position",
              "parameters"
            ],
            "properties": {
              "id": {
                "type": "string"
              },
              "name": {
                "type": "string"
              },
              "type": {
                "type": "string"
              },
              "typeVersion": {
                "type": "number"
              },
              "position": {
                "type": "array",
                "items": {
                  "type": "number"
                },
                "minItems": 2,
                "maxItems": 2
              },
              "parameters": {
                "type": "object"
              },
              "credentials": {
                "type": "object"
              },
              "disabled": {
                "type": "boolean"
              },
              "notes": {
                "type": "string"
              },
              "continueOnFail": {
                "type": "boolean"
              },
              "retryOnFail": {
                "type": "boolean"
              },
              "maxTries": {
                "type": "number"
              },
              "waitBetweenTries": {
                "type": "number"
              }
            }
          }
        },
        "connections": {
          "type": "object",
          "description": "Workflow connections object. IMPORTANT: Keys must be source node NAMES (not IDs), values define output connections. Example: {\"웹훅\": {\"main\": [[{\"node\": \"슬랙\", \"type\": \"main\", \"index\": 0}]]}}"
        },
        "settings": {
          "type": "object",
          "description": "Optional workflow settings (execution order, timezone, error handling)",
          "properties": {
            "executionOrder": {
              "type": "string",
              "enum": [
                "v0",
                "v1"
              ]
            },
            "timezone": {
              "type": "string"
            },
            "saveDataErrorExecution": {
              "type": "string",
              "enum": [
                "all",
                "none"
              ]
            },
            "saveDataSuccessExecution": {
              "type": "string",
              "enum": [
                "all",
                "none"
              ]
            },
            "saveManualExecutions": {
              "type": "boolean"
            },
            "saveExecutionProgress": {
              "type": "boolean"
            },
            "executionTimeout": {
              "type": "number"
            },
            "errorWorkflow": {
              "type": "string"
            }
          }
        }
      },
      "required": [
        "name",
        "nodes",
        "connections"
      ]
    }
  },
  {
    "name": "n8n_update_full_workflow",
    "description": "MANAGE: Complete workflow replacement. Requires api_key. Use for major structural changes. For small updates, modify workflow JSON and use this tool with full nodes[] and connections{}.",
    "inputSchema": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Workflow ID to update"
        },
        "name": {
          "type": "string",
          "description": "New workflow name"
        },
        "nodes": {
          "type": "array",
          "description": "Complete array of workflow nodes (required if modifying workflow structure)",
          "items": {
            "type": "object",
            "additionalProperties": true
          }
        },
        "connections": {
          "type": "object",
          "description": "Complete connections object (required if modifying workflow structure)"
        },
        "settings": {
          "type": "object",
          "description": "Workflow settings to update"
        }
      },
      "required": [
        "id"
      ]
    }
  },
  {
    "name": "n8n_delete_workflow",
    "description": "MANAGE: Permanently remove workflow. Requires api_key. Cannot be undone - use with caution. Use n8n_list_workflows first to confirm correct workflow ID.",
    "inputSchema": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Workflow ID to delete"
        }
      },
      "required": [
        "id"
      ]
    }
  },
  {
    "name": "n8n_list_workflows",
    "description": "REFERENCE: Browse workflow examples and templates. Use tags=['well_define'] for validated reference workflows, or no tags to see all available workflows for inspiration.",
    "inputSchema": {
      "type": "object",
      "properties": {
        "limit": {
          "type": "number",
          "description": "Number of workflows to return (1-100, default: 100)"
        },
        "cursor": {
          "type": "string",
          "description": "Pagination cursor from previous response"
        },
        "active": {
          "type": "boolean",
          "description": "Filter by active status"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Filter by tags (exact match) - use ['well_define'] for best practices"
        },
        "projectId": {
          "type": "string",
          "description": "Filter by project ID (enterprise feature)"
        },
        "excludePinnedData": {
          "type": "boolean",
          "description": "Exclude pinned data from response (default: true)"
        }
      }
    }
  },
  {
    "name": "n8n_get_workflow",
    "description": "REFERENCE: Get complete workflow structure for analysis or templates. Use to study existing workflows before creating similar ones. Returns full JSON with nodes, connections, and settings.",
    "inputSchema": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Workflow ID"
        }
      },
      "required": [
        "id"
      ]
    }
  }
]